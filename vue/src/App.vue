<script setup>
	import { ref } from 'vue'
	const status = ref(null)

	fetch('/api/status')
		.then(response => response = response.json())
		.then(data => status.value = data)


	/* SCHEDULE */

	const schedule = [	
	{ 	
			startTime: '2025-04-02T11:00:00',
			endTime: '2025-04-02T12:00:00',
			title: 'Velkomst og frokost',
			description: 'Velkommen til digitaliseringsdag! Vi starter dagen med en lækker frokost og en kort velkomsttale.'
		},
		{ 	
			startTime: '2025-04-02T12:00:00',
			endTime: '2025-04-02T12:45:00',
			title: 'GenAI i kommunale rammer',
			description: 'Generativ AI (GenAI) skaber nye muligheder for effektiv opgaveløsning. Oplægget fokuserer på, hvordan GenAI kan styrke kommunale arbejdsprocesser og udnytte teknologiens potentiale.'
		},
		{ 	
			startTime: '2025-04-02T13:00:00',
			endTime: '2025-04-02T13:45:00',
			title: 'Deltag i 1 af 3 oplæg',
			description: '(1) GIS og dets anvendelsesmuligheder.\n(2) Data, der afslører mønstre og skaber handling.\n(3) Sensorteknologi og dets perspektiver til fx grøn omstilling.'
		},
		{
			startTime: '2025-04-02T13:45:00',
			endTime: '2025-04-02T15:15:00',
			title: 'Åbent standeområde',
			description: 'Opdag de spændende og inspirerende stande, du kan besøge, og få et indblik i, hvad de har at tilbyde. Læs mere i det fulde program.'
		},
		{
			startTime: '2025-04-02T15:15:00',
			endTime: '2025-04-02T15:30:00',
			title: 'Tak for i dag',
			description: 'Vi siger tak for i dag og glæder os til at se jer igen næste gang!'
		},

	];

	const currentItem = ref(null);

	const updateCurrentItem = () => {
		const now = new Date().getTime();
		currentItem.value = schedule.find(item => {
			const start = new Date(item.startTime).getTime();
			const end = new Date(item.endTime).getTime();
			return now >= start && now <= end;
		}) || schedule.filter(item => new Date(item.startTime).getTime() > now).sort((a, b) => new Date(a.startTime) - new Date(b.startTime))[0] || null;
	};

	setInterval(updateCurrentItem, 10000);
	updateCurrentItem();


	/* COUNTER */

	const eventHasStarted = ref(false)
	const targetTime = new Date('2025-04-02T11:00:00').getTime()
	const timeLeft = ref('')

	const updateCountdown = () => {
		const now = new Date().getTime();
		const distance = targetTime - now;

		if (distance < 0) {
			timeLeft.value = 'NU!'
			clearInterval(interval)
			eventHasStarted.value = true
			return
		}

		const days = Math.floor(distance / (1000 * 60 * 60 * 24))
		const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))
		const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))
		const seconds = Math.floor((distance % (1000 * 60)) / 1000)
		let timeString = ''
		if (days > 0) timeString += `${days} dage `
		if (hours > 0) timeString += `${hours} timer `
		if (minutes > 0) timeString += `${minutes} minutter `
		if (seconds > 0) timeString += `${seconds} sekunder`
		timeLeft.value = timeString.trim()
	};

	const interval = setInterval(updateCountdown, 1000)
	updateCountdown()
</script>

<template>
    <div class="main">

		<div class="header">
			<svg id="logo" class="desktop-only" viewBox="0 0 243 36" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
				<path d="M214.827 1.298C214.922 1.298 215.015 1.26974 215.094 1.21679 215.174 1.16383 215.235 1.08857 215.272 1.00051 215.308.912449 215.318.815551 215.299.722068 215.281.628585 215.235.542716 215.167.475318 215.1.407921 215.014.362023 214.921.343428 214.827.324833 214.73.334376 214.642.370852 214.554.407327 214.479.469095 214.426.548346 214.373.627597 214.345.720771 214.345.816086 214.344.879475 214.357.942308 214.381 1.00094 214.405 1.05958 214.44 1.11285 214.485 1.15768 214.53 1.2025 214.583 1.23798 214.642 1.26207 214.7 1.28616 214.763 1.29837 214.827 1.298ZM211.297 9.09221H218.356L214.826 1.62109 211.297 9.09221ZM223.287 9.49618C223.553 9.49618 223.769 9.28042 223.769 9.01427 223.769 8.74811 223.553 8.53235 223.287 8.53235 223.02 8.53235 222.805 8.74811 222.805 9.01427 222.805 9.28042 223.02 9.49618 223.287 9.49618ZM221.278 15.034H225.295L223.287 9.83044 221.278 15.034ZM204.358 15.034H208.375L206.367 9.83044 204.358 15.034ZM206.367 9.49618C206.633 9.49618 206.849 9.28042 206.849 9.01427 206.849 8.74811 206.633 8.53235 206.367 8.53235 206.101 8.53235 205.885 8.74811 205.885 9.01427 205.885 9.28042 206.101 9.49618 206.367 9.49618ZM220.649 30.2688C219.923 30.6202 219.159 30.8884 218.373 31.0683L218.802 31.8427C220.581 31.3737 222.255 30.5742 223.738 29.486H223.752C222.679 29.5576 221.628 29.8228 220.649 30.2688ZM209.298 30.2688C208.209 29.7742 207.033 29.4969 205.838 29.4526 205.988 29.564 206.142 29.6726 206.295 29.7785 208.809 31.4766 211.777 32.3766 214.81 32.3608 215.089 32.3608 215.368 32.3608 215.646 32.3385L215.15 31.4471C213.053 31.4694 210.944 31.0766 209.298 30.2688Z" fill="currentColor"></path>
				<path d="M229 19.739 225.295 20.4299V16.0397H225.554V15.5801H221.025V16.0397H221.287V21.1792L218.56 21.689V10.187H218.819V9.72742H210.838V10.187H211.097V21.689L208.384 21.182V16.0369H208.64V15.5801H204.099V16.0369H204.358V20.4299L200.637 19.7307C200.637 19.7892 200.637 19.8449 200.637 19.9006 200.637 19.9563 200.637 19.9619 200.637 19.9953 200.734 22.1703 201.423 24.2774 202.628 26.0903L202.784 26.0708 202.631 26.0931C202.723 26.2296 202.815 26.3717 202.91 26.497 202.916 26.5079 202.924 26.5182 202.932 26.5277 203.027 26.6586 203.122 26.7868 203.211 26.9149 205.838 26.589 208.71 26.9427 210.802 27.979 211.696 28.3923 212.654 28.6504 213.635 28.7423L213.103 27.7617V22.3548C213.103 21.299 213.877 20.4438 214.832 20.4438 215.788 20.4438 216.562 21.299 216.562 22.3548V27.7979L217.019 28.6336C217.754 28.5138 218.469 28.2916 219.142 27.9734 221.153 26.979 223.877 26.614 226.432 26.8787 226.535 26.745 226.635 26.6001 226.733 26.472L226.769 26.4163C226.855 26.2965 226.939 26.1739 227.02 26.0513H226.972 227.022C228.26 24.1742 228.946 21.9869 229 19.739ZM206.994 20.9146 205.74 20.6806V18.6192C205.732 18.5319 205.742 18.4439 205.77 18.3608 205.797 18.2776 205.842 18.2012 205.901 18.1363 205.96 18.0715 206.032 18.0197 206.112 17.9843 206.192 17.9488 206.279 17.9305 206.367 17.9305 206.454 17.9305 206.541 17.9488 206.621 17.9843 206.702 18.0197 206.773 18.0715 206.832 18.1363 206.891 18.2012 206.936 18.2776 206.964 18.3608 206.992 18.4439 207.002 18.5319 206.994 18.6192V20.9146ZM215.465 15.5745H214.211V12.8613C214.203 12.774 214.213 12.686 214.241 12.6028 214.269 12.5197 214.313 12.4432 214.372 12.3784 214.431 12.3136 214.503 12.2618 214.583 12.2263 214.664 12.1909 214.75 12.1726 214.838 12.1726 214.926 12.1726 215.012 12.1909 215.093 12.2263 215.173 12.2618 215.245 12.3136 215.304 12.3784 215.363 12.4432 215.407 12.5197 215.435 12.6028 215.463 12.686 215.473 12.774 215.465 12.8613V15.5745ZM223.925 20.6806 222.671 20.9146V18.6192C222.663 18.5319 222.673 18.4439 222.701 18.3608 222.729 18.2776 222.773 18.2012 222.832 18.1363 222.891 18.0715 222.963 18.0197 223.043 17.9843 223.124 17.9488 223.21 17.9305 223.298 17.9305 223.386 17.9305 223.472 17.9488 223.553 17.9843 223.633 18.0197 223.705 18.0715 223.764 18.1363 223.823 18.2012 223.867 18.2776 223.895 18.3608 223.923 18.4439 223.933 18.5319 223.925 18.6192V20.6806ZM219.641 28.7284C218.951 29.0591 218.222 29.2988 217.471 29.4415L217.919 30.2493C218.69 30.091 219.439 29.8384 220.148 29.4972 221.454 28.8537 223.173 28.5361 224.883 28.5445 225.025 28.4108 225.162 28.2659 225.304 28.1378 225.354 28.0904 225.401 28.0375 225.449 27.9874 225.496 27.9372 225.624 27.8091 225.708 27.7088L225.725 27.6921C223.563 27.5667 221.298 27.9094 219.641 28.7284ZM214.657 30.5474 214.161 29.6532C212.827 29.5955 211.518 29.2795 210.305 28.7227 208.57 27.8648 206.171 27.5305 203.915 27.7171L203.99 27.7951C204.091 27.901 204.188 28.0041 204.291 28.1071 204.341 28.16 204.394 28.2102 204.447 28.2603L204.687 28.4888 204.748 28.5445C206.564 28.4915 208.417 28.8063 209.801 29.4916 211.327 30.1831 212.982 30.5429 214.657 30.5474ZM0 26.6723V9.96698H6.66412C10.4582 9.96698 11.9791 12.1665 12.0077 14.9181 12.0322 16.9623 10.9897 18.6426 8.95363 19.2232L12.6332 26.6723H9.09264L5.94865 19.8691H3.19305V26.6723H0ZM3.19305 17.2689H5.55207C8.05418 17.2689 8.82281 16.4839 8.82281 14.9099 8.82281 13.3358 7.87429 12.5509 6.11627 12.5509H3.19305V17.2771 17.2689ZM21.2389 26.6723 21.0509 25.6298C19.9725 26.4467 18.6587 26.8927 17.3059 26.9013 15.1309 26.9013 14.0352 25.3517 14.0352 23.7082 14.0352 20.9812 16.2552 19.5462 20.9282 18.9902V17.9722C20.9282 17.0482 20.1882 16.5371 19.1702 16.5371 17.8292 16.5371 17.0892 17.2567 16.5332 18.0171L14.6811 16.6066C15.4211 15.3351 17.4122 14.3621 19.1784 14.4111 22.4164 14.4766 23.7901 15.6581 23.7901 19.2559V24.9347C23.7713 25.5225 23.8486 26.1095 24.0191 26.6723H21.2389ZM20.9282 20.9117C19.0067 21.2797 16.9011 21.6722 16.9011 23.3648 16.8854 23.5522 16.9103 23.7409 16.9743 23.9178 17.0383 24.0947 17.1398 24.2557 17.2718 24.3897 17.4039 24.5237 17.5633 24.6275 17.7393 24.6941 17.9153 24.7606 18.1035 24.7883 18.2912 24.7753 19.1947 24.7753 20.3354 24.0148 20.9282 23.5038V20.9117ZM26.6729 26.6722V14.64H29.3099V15.9361C30.377 15.196 31.5994 14.4111 32.9895 14.4111 35.3975 14.4111 36.5546 15.981 36.5546 18.4341V26.6722H33.6927V18.847C33.6927 17.2116 33.1857 16.7169 32.2127 16.7169 31.7015 16.7315 31.199 16.8525 30.7372 17.0721 30.2755 17.2918 29.8645 17.6052 29.5307 17.9925V26.6722H26.6729ZM49.4374 26.6723H47.0089L46.8699 25.3885C45.8519 26.382 44.9034 26.9135 43.5992 26.9135 40.4061 26.9135 38.7871 24.0925 38.7871 20.3434 38.7871 17.3834 40.5002 14.4234 43.5992 14.4234 44.1496 14.4431 44.6906 14.5718 45.191 14.802 45.6913 15.0321 46.1411 15.3592 46.5142 15.7644H46.5592V9.96698H49.4211V26.6723H49.4374ZM46.5755 17.7391C45.9947 17.1258 45.1992 16.761 44.3555 16.721 42.6425 16.721 41.6735 18.1111 41.6735 20.6582 41.6735 23.2053 42.6343 24.5708 44.3474 24.5708 45.5739 24.5708 45.9827 23.9698 46.5674 23.5078V17.7391H46.5755ZM54.3386 21.1161C54.3877 23.6182 55.4957 24.5872 56.8367 24.5872 58.1777 24.5872 58.8032 23.9862 59.5228 23.1522L61.6038 24.4482C60.4958 26.1612 58.8727 26.9012 56.5586 26.9012 53.4392 26.9012 51.4727 24.4727 51.4727 20.6582 51.4727 16.8437 53.4392 14.4111 56.6977 14.4111 59.8457 14.3866 61.6038 17.0481 61.6038 19.9387V21.1161H54.3386ZM58.9504 19.1741C58.9054 17.5101 58.0264 16.5371 56.6363 16.5371 55.2463 16.5371 54.3713 17.5101 54.3223 19.1741H58.9504ZM63.7793 26.6722V14.64H66.4163V16.6842H66.4613C67.1563 15.2492 68.1253 14.4397 69.8383 14.3947V17.4242C69.6703 17.402 69.5007 17.3938 69.3314 17.3997 67.8963 17.3997 66.6453 19.0351 66.6453 19.3458V26.6722H63.7793ZM77.5206 17.8086C76.94 17.1871 76.1796 16.5371 75.276 16.5371 74.164 16.5371 73.6407 16.999 73.6407 17.7186 73.6407 19.7628 79.6547 18.8961 79.6547 23.2911 79.6547 25.7932 77.7577 26.9012 75.2352 26.9012 74.3322 26.9167 73.4402 26.7018 72.6433 26.2769 71.8464 25.852 71.171 25.2311 70.6807 24.4727L72.5981 23.0376C73.2686 23.9657 74.1722 24.7711 75.3987 24.7711 76.4167 24.7711 77.1077 24.2192 77.1077 23.4097 77.1077 21.3655 71.0936 22.0891 71.0936 17.9026 71.0936 15.658 72.9906 14.4111 75.0757 14.4111 75.8711 14.3927 76.661 14.5465 77.3914 14.862 78.1217 15.1774 78.7753 15.647 79.3072 16.2386L77.5042 17.8086H77.5206ZM92.0464 26.6723H90.1943V9.96698H92.0464V18.6426H92.0914L99.009 9.96698H101.204L96.0244 16.2591 101.83 26.6723H99.7244L94.7529 17.7881 92.0464 21.0711V26.6723ZM108.723 26.9012C105.453 26.9012 103.797 24.1252 103.797 20.6582 103.797 17.1912 105.432 14.4111 108.723 14.4111 112.015 14.4111 113.654 17.1871 113.654 20.6582 113.654 24.1292 112.019 26.9012 108.723 26.9012ZM108.723 15.842C106.736 15.842 105.453 17.5551 105.453 20.6582 105.453 23.7613 106.724 25.4662 108.723 25.4662 110.723 25.4662 111.994 23.7531 111.994 20.6582 111.994 17.5632 110.723 15.842 108.723 15.842ZM116.405 26.6722V14.64H118.069V16.2386L118.163 16.1446C118.596 15.6319 119.13 15.2135 119.731 14.9154 120.333 14.6172 120.989 14.4456 121.659 14.4111 123.204 14.4111 124.296 15.196 124.733 16.3081 125.796 15.1715 127.137 14.4111 128.552 14.4111 130.146 14.4111 131.859 15.0816 131.859 18.0661V26.6518H130.196V18.0661C130.196 16.4307 129.378 15.842 128.319 15.842 126.839 15.842 125.866 16.8151 124.962 17.6941V26.6886H123.298V18.1029C123.298 16.4675 122.481 15.8788 121.426 15.8788 119.946 15.8788 118.973 16.8519 118.069 17.7309V26.7254L116.405 26.6722ZM135.674 26.6722V14.64H137.342V16.2386L137.436 16.1446C137.867 15.6316 138.399 15.2129 138.999 14.9146 139.599 14.6164 140.254 14.445 140.923 14.4111 142.477 14.4111 143.564 15.196 144.002 16.3081 145.065 15.1715 146.41 14.4111 147.821 14.4111 149.415 14.4111 151.128 15.0816 151.128 18.0661V26.6518H149.46V18.0661C149.46 16.4307 148.642 15.842 147.587 15.842 146.107 15.842 145.134 16.8151 144.235 17.6941V26.6886H142.567V18.1029C142.567 16.4675 141.749 15.8788 140.694 15.8788 139.214 15.8788 138.241 16.8519 137.342 17.7309V26.7254L135.674 26.6722ZM162.183 26.6723V25.0369H162.139C161.19 26.0999 159.939 26.8849 158.578 26.8849 156.795 26.8849 155.106 25.9609 155.106 23.3688V14.6401H156.77V23.3443C156.77 24.9388 157.535 25.4703 158.737 25.4703 159.939 25.4703 161.423 24.4523 162.183 23.6469V14.6523H163.852V26.6723H162.183ZM169.633 14.64V16.2754H169.682C170.631 15.2124 171.878 14.4274 173.243 14.4274 175.026 14.4274 176.714 15.3514 176.714 17.9435V26.6722H175.062V17.9721C175.062 16.3735 174.302 15.842 173.1 15.842 171.898 15.842 170.414 16.86 169.649 17.6736V26.6682H167.985V14.64H169.633ZM189.551 24.1047C188.766 25.4662 187.654 26.9012 184.927 26.9012 182.2 26.9012 179.698 25.0532 179.698 20.6582 179.698 16.7701 181.64 14.4111 184.604 14.4111 187.106 14.4111 189.187 16.0464 189.187 19.8691V20.9812H181.362C181.362 23.6182 182.936 25.4784 184.927 25.4784 185.617 25.4801 186.294 25.2898 186.882 24.9287 187.469 24.5677 187.945 24.0502 188.255 23.4342L189.551 24.1088V24.1047ZM187.507 19.5461C187.507 17.3261 186.444 15.842 184.645 15.842 182.63 15.842 181.542 17.3261 181.403 19.5461H187.507Z" fill="currentColor"></path>
			</svg>
			<p class="title">Digitaliseringsdag</p>
		</div>

		<div class="banner timer" v-if="!eventHasStarted">{{ !eventHasStarted ? ('Vi starter om ' + timeLeft) : '' }} :)</div>
		
		<div class="banner program">
			<p class="title slim flex-center">Program for dagen</p>
			<div>
				<p class="time">{{ currentItem ? new Date(currentItem.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : '' }}
					- {{ currentItem ? new Date(currentItem.endTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : '' }}
				</p>
				<p class="title">{{ currentItem.title }}</p>
				<p v-html="currentItem.description.replace(/\n/g, '<br>')"></p>
			</div>
			<a class="link flex-end" target="_blank" href="https://www.canva.com/design/DAGbDUwBP-E/B8em1XKnJ9TwxS79W07kCA/view?utm_content=DAGbDUwBP-E&utm_campaign=designshare&utm_medium=link&utm_source=viewer">
				<p>Se hele programmet her ></p>
			</a>
		</div>

		<div class="banner idea">
			<p class="title slim">Idé til digital fornyelse?</p>
			<p>Tilføj dit forslag til vores idé-tavle, lad andre blive inspireret, og
			bliv kontaktet med henblik på at gøre din idé til virkelighed!</p>
			<a class="link flex-end" target="_blank" href="https://randers.ditmerflex.dk/randers/Login/LoginAnonym?returnUrl=/randers/Opret/7b7f71bcd68e2">
				<p>Tilføj din idé her ></p>
			</a>
		</div>

	</div>
</template>
